# Variables
debug:                      &debug                     True
openstack_origin:           &openstack_origin          __OS_ORIGIN__

applications:
  swift-proxy:
    num_units: 1
    charm: cs:~openstack-charmers-next/swift-proxy
    constraints: mem=1G
    options:
      debug: *debug
      zone-assignment: manual
      replicas: 3
      swift-hash: fdfef9d4-8b06-11e2-8ac0-531c923c8fae
      openstack-origin: *openstack_origin
  swift-storage-z1:
    num_units: 1
    charm: cs:~openstack-charmers-next/swift-storage
    constraints: mem=1G
    options:
      zone: 1
      block-device: vdb
      overwrite: 'true'
      ephemeral-unmount: '/mnt' 
      openstack-origin: *openstack_origin
  swift-storage-z2:
    num_units: 1
    charm: cs:~openstack-charmers-next/swift-storage
    constraints: mem=1G
    options:
      zone: 2
      block-device: vdb
      overwrite: 'true'
      ephemeral-unmount: '/mnt' 
      openstack-origin: *openstack_origin
  swift-storage-z3:
    num_units: 1
    charm: cs:~openstack-charmers-next/swift-storage
    constraints: mem=1G
    options:
      zone: 3
      block-device: vdb
      overwrite: 'true'
      ephemeral-unmount: '/mnt' 
      openstack-origin: *openstack_origin
relations:
  - [ swift-proxy, keystone ]
  - [ swift-proxy, swift-storage-z1 ]
  - [ swift-proxy, swift-storage-z2 ]
  - [ swift-proxy, swift-storage-z3 ]
