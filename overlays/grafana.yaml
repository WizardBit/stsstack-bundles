applications:
  grafana:
    charm: __CHARM_STORE____CHARM_NS____CHARM_PREFIX__grafana
    channel: __CHARM_CHANNEL____CHARM_TRACK__
    num_units: 1
    constraints: mem=1G
    options:
      snap_channel: __GRAFANA_SNAP_CHANNEL__
      port: '3000'  # XXX: bug 1752960
      install_method: snap
      admin_password: admin
  prometheus:
    charm: __CHARM_STORE____CHARM_NS____CHARM_PREFIX__prometheus2
    channel: __CHARM_CHANNEL____CHARM_TRACK__
    num_units: 1
    constraints: mem=1G
  telegraf:
    charm: __CHARM_STORE____CHARM_NS____CHARM_PREFIX__telegraf
    channel: __CHARM_CHANNEL____CHARM_TRACK__
    expose: True
    options:
      prometheus_output_port: default
relations:
  - [ 'prometheus:grafana-source', 'grafana:grafana-source' ]
  - [ 'prometheus:target', 'telegraf:prometheus-client' ]
