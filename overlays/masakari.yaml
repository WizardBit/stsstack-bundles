# Variables
debug:                      &debug                     True
verbose:                    &verbose                   True
openstack_origin:           &openstack_origin          __OS_ORIGIN__

applications:
  masakari-monitors:
    charm: __CHARM_STORE____CHARM_NS____CHARM_PREFIX__masakari-monitors
    channel: __CHARM_TRACK____CHARM_CHANNEL__
    options:
      debug: *debug
  pacemaker-remote:
    charm: __CHARM_STORE____CHARM_NS____CHARM_PREFIX__pacemaker-remote
    channel: __CHARM_TRACK____CHARM_CHANNEL__
    options:
      enable-stonith: True
      enable-resources: False
  masakari:
    charm: __CHARM_STORE____CHARM_NS____CHARM_PREFIX__masakari
    channel: __CHARM_TRACK____CHARM_CHANNEL__
    num_units: __NUM_MASAKARI_UNITS__
    options:
      debug: *debug
      openstack-origin: *openstack_origin
relations:
  - [ nova-compute:juju-info, masakari-monitors:container ]
  - [ keystone:identity-credentials, masakari-monitors:identity-credentials ]
  - [ nova-compute:juju-info, pacemaker-remote:juju-info ]
  - [ masakari:identity-service, keystone:identity-service ]
  - [ masakari:shared-db, mysql:shared-db ]
  - [ masakari:amqp, rabbitmq-server:amqp ]

